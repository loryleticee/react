{"ast":null,"code":"import { store } from \"../\";\nimport { ADD_MESSAGE, LOAD_MESSAGE_PENDING, LOAD_MESSAGE_ERROR, LOAD_MESSAGE_SUCCESS, successMessages, pendingMessages, errorMessages } from \"../actions\";\nimport axios from \"axios\";\nconst URL = \"https://my-json-server.typicode.com/tlenclos/formation-react-fake-server/messages\";\n\nconst INIT_STATE = () => (\n/*\n    return axios.get(URL)\n        .then(response => {\n            store.dispatch(successMessages(response.data));\n        }).then(\n            response => {\n                store.dispatch(pendingMessages('...chargement'));\n            }\n        )\n        .catch(error => {\n            store.dispatch({type :LOAD_MESSAGE_ERROR, message:error});\n        })\n*/\n({\n  message: \"messages en chargement\",\n  username: \"\",\n  sentAt: \"\"\n}), {\n  message: \"messages en chargement\",\n  username: \"\",\n  sentAt: \"\"\n});\n\nexport const messageList = (state = INIT_STATE(), action) => {\n  switch (action.type) {\n    case ADD_MESSAGE:\n      let newState = {\n        username: action.username,\n        message: action.message,\n        sentAt: action.sentAt\n      };\n      return [...state, newState];\n\n    case LOAD_MESSAGE_ERROR:\n      console.log(state);\n      /*const errorState = () => ({\n          username: \"error\",\n          message : action.message,\n          sentAt  : new Date(),\n      });\n      console.log(errorState());\n      return errorState();*/\n\n      return state;\n\n    case LOAD_MESSAGE_PENDING:\n      return [...state, action.message];\n\n    case LOAD_MESSAGE_SUCCESS:\n      state = action.message.map(msg => {\n        return msg;\n      });\n      return state;\n\n    default:\n      console.log(state);\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/loryleticee/Sites/react/src/reducers/Chat.js"],"names":["store","ADD_MESSAGE","LOAD_MESSAGE_PENDING","LOAD_MESSAGE_ERROR","LOAD_MESSAGE_SUCCESS","successMessages","pendingMessages","errorMessages","axios","URL","INIT_STATE","message","username","sentAt","messageList","state","action","type","newState","console","log","map","msg"],"mappings":"AAAA,SAAQA,KAAR,QAAoB,KAApB;AACA,SACIC,WADJ,EAEIC,oBAFJ,EAGIC,kBAHJ,EAIIC,oBAJJ,EAKIC,eALJ,EAMIC,eANJ,EAOIC,aAPJ,QAQO,YARP;AASA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,GAAG,GAAG,mFAAZ;;AAEA,MAAMC,UAAU,GAAG;AACnB;;;;;;;;;;;;;AAcI;AACIC,EAAAA,OAAO,EAAO,wBADlB;AAEIC,EAAAA,QAAQ,EAAM,EAFlB;AAGIC,EAAAA,MAAM,EAAQ;AAHlB,IAKI;AACAF,EAAAA,OAAO,EAAO,wBADd;AAEAC,EAAAA,QAAQ,EAAM,EAFd;AAGAC,EAAAA,MAAM,EAAQ;AAHd,CApBW,CAAnB;;AA2BA,OAAO,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGL,UAAU,EAAnB,EAAuBM,MAAvB,KAAkC;AACzD,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKhB,WAAL;AACI,UAAIiB,QAAQ,GAAG;AACXN,QAAAA,QAAQ,EAAEI,MAAM,CAACJ,QADN;AAEXD,QAAAA,OAAO,EAAGK,MAAM,CAACL,OAFN;AAGXE,QAAAA,MAAM,EAAIG,MAAM,CAACH;AAHN,OAAf;AAMA,aAAO,CAAC,GAAGE,KAAJ,EAAWG,QAAX,CAAP;;AAEJ,SAAKf,kBAAL;AACIgB,MAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;AACA;;;;;;;;AAOA,aAAOA,KAAP;;AAEJ,SAAKb,oBAAL;AACI,aAAO,CAAC,GAAGa,KAAJ,EAAWC,MAAM,CAACL,OAAlB,CAAP;;AAEJ,SAAKP,oBAAL;AACIW,MAAAA,KAAK,GAAGC,MAAM,CAACL,OAAP,CAAeU,GAAf,CAAqBC,GAAD,IAAQ;AACjC,eAAOA,GAAP;AACF,OAFO,CAAR;AAGA,aAAOP,KAAP;;AAEJ;AACII,MAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;AACA,aAAOA,KAAP;AAhCR;AAkCH,CAnCM","sourcesContent":["import {store} from \"../\";\nimport {\n    ADD_MESSAGE,\n    LOAD_MESSAGE_PENDING,\n    LOAD_MESSAGE_ERROR,\n    LOAD_MESSAGE_SUCCESS,\n    successMessages,\n    pendingMessages,\n    errorMessages,\n} from \"../actions\";\nimport axios from \"axios\";\n\nconst URL = \"https://my-json-server.typicode.com/tlenclos/formation-react-fake-server/messages\";\n\nconst INIT_STATE = () => (\n/*\n    return axios.get(URL)\n        .then(response => {\n            store.dispatch(successMessages(response.data));\n        }).then(\n            response => {\n                store.dispatch(pendingMessages('...chargement'));\n            }\n        )\n        .catch(error => {\n            store.dispatch({type :LOAD_MESSAGE_ERROR, message:error});\n        })\n*/\n\n    {\n        message     : \"messages en chargement\",\n        username    : \"\",\n        sentAt      : \"\"\n    },\n        {\n        message     : \"messages en chargement\",\n        username    : \"\",\n        sentAt      : \"\"\n    }\n);\n\nexport const messageList = (state = INIT_STATE(), action) => {\n    switch (action.type) {\n        case ADD_MESSAGE :\n            let newState = {\n                username: action.username,\n                message : action.message,\n                sentAt  : action.sentAt,\n            };\n\n            return [...state, newState];\n\n        case LOAD_MESSAGE_ERROR :\n            console.log(state);\n            /*const errorState = () => ({\n                username: \"error\",\n                message : action.message,\n                sentAt  : new Date(),\n            });\n            console.log(errorState());\n            return errorState();*/\n            return state;\n\n        case LOAD_MESSAGE_PENDING :\n            return [...state, action.message];\n\n        case LOAD_MESSAGE_SUCCESS :\n            state = action.message.map( (msg) =>{\n               return msg\n            });\n            return state;\n\n        default :\n            console.log(state);\n            return state;\n    }\n};"]},"metadata":{},"sourceType":"module"}