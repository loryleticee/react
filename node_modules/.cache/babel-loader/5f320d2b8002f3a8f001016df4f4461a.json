{"ast":null,"code":"import { useDispatch } from \"react-redux\";\nimport { ADD_MESSAGE, LOAD_MESSAGE_PENDING, LOAD_MESSAGE_ERROR, LOAD_MESSAGE_SUCCESS } from \"../actions\";\nimport axios from \"axios\";\nconst URL = \"https://my-json-server.typicode.com/tlenclos/formation-react-fake-server/messages\";\n\nconst INIT_STATE = () => {\n  const dispatch = useDispatch();\n  return () => {\n    dispatch({\n      type: LOAD_MESSAGE_PENDING\n    });\n    return async () => {\n      await axios.get(URL).then(response => {\n        console.log(response);\n        dispatch({\n          type: LOAD_MESSAGE_SUCCESS,\n          messages: response\n        });\n      }).catch(err => dispatch({\n        type: LOAD_MESSAGE_ERROR,\n        error: err\n      }));\n    };\n  };\n};\n\nexport const messageList = (state = INIT_STATE, action) => {\n  switch (action.type) {\n    case ADD_MESSAGE:\n      let newState = {\n        username: action.username,\n        message: action.message,\n        sentAt: action.sentAt\n      };\n      return [...state, newState];\n\n    case LOAD_MESSAGE_ERROR:\n      return state;\n\n    case LOAD_MESSAGE_PENDING:\n      console.log(state);\n      return state;\n\n    case LOAD_MESSAGE_SUCCESS:\n      return state;\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/loryleticee/Sites/react/src/reducers/Chat.js"],"names":["useDispatch","ADD_MESSAGE","LOAD_MESSAGE_PENDING","LOAD_MESSAGE_ERROR","LOAD_MESSAGE_SUCCESS","axios","URL","INIT_STATE","dispatch","type","get","then","response","console","log","messages","catch","err","error","messageList","state","action","newState","username","message","sentAt"],"mappings":"AAAA,SAAQA,WAAR,QAA0B,aAA1B;AACA,SAAQC,WAAR,EAAqBC,oBAArB,EAA2CC,kBAA3C,EAA+DC,oBAA/D,QAA0F,YAA1F;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,GAAG,GAAG,mFAAZ;;AAEA,MAAMC,UAAU,GAAG,MAAM;AACrB,QAAMC,QAAQ,GAAGR,WAAW,EAA5B;AAEA,SAAO,MAAM;AACTQ,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAAEP;AAAP,KAAD,CAAR;AAEA,WAAO,YAAY;AACd,YAAMG,KAAK,CAACK,GAAN,CAAUJ,GAAV,EAAeK,IAAf,CACHC,QAAQ,IAAI;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAJ,QAAAA,QAAQ,CAAC;AAACC,UAAAA,IAAI,EAAEL,oBAAP;AAA6BW,UAAAA,QAAQ,EAAEH;AAAvC,SAAD,CAAR;AACH,OAJE,EAKLI,KALK,CAKCC,GAAG,IAAIT,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAAEN,kBAAP;AAA2Be,QAAAA,KAAK,EAAED;AAAlC,OAAD,CALhB,CAAN;AAMJ,KAPD;AAQH,GAXD;AAYH,CAfD;;AAiBA,OAAO,MAAME,WAAW,GAAG,CAACC,KAAK,GAAGb,UAAT,EAAqBc,MAArB,KAAgC;AACvD,UAAQA,MAAM,CAACZ,IAAf;AACI,SAAKR,WAAL;AACI,UAAIqB,QAAQ,GAAG;AACXC,QAAAA,QAAQ,EAAEF,MAAM,CAACE,QADN;AAEXC,QAAAA,OAAO,EAAGH,MAAM,CAACG,OAFN;AAGXC,QAAAA,MAAM,EAAIJ,MAAM,CAACI;AAHN,OAAf;AAMA,aAAO,CAAC,GAAGL,KAAJ,EAAWE,QAAX,CAAP;;AAEJ,SAAKnB,kBAAL;AACI,aAAOiB,KAAP;;AAEJ,SAAKlB,oBAAL;AACIW,MAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AACA,aAAOA,KAAP;;AAEJ,SAAKhB,oBAAL;AACI,aAAOgB,KAAP;;AAGJ;AACI,aAAOA,KAAP;AAtBR;AAwBH,CAzBM","sourcesContent":["import {useDispatch} from \"react-redux\";\nimport {ADD_MESSAGE, LOAD_MESSAGE_PENDING, LOAD_MESSAGE_ERROR, LOAD_MESSAGE_SUCCESS} from \"../actions\";\nimport axios from \"axios\";\n\nconst URL = \"https://my-json-server.typicode.com/tlenclos/formation-react-fake-server/messages\";\n\nconst INIT_STATE = () => {\n    const dispatch = useDispatch();\n\n    return () => {\n        dispatch({type: LOAD_MESSAGE_PENDING});\n\n        return async () => {\n             await axios.get(URL).then(\n                response => {\n                    console.log(response);\n                    dispatch({type :LOAD_MESSAGE_SUCCESS, messages: response})\n                }\n            ).catch(err => dispatch({type :LOAD_MESSAGE_ERROR, error: err}))\n        }\n    }\n};\n\nexport const messageList = (state = INIT_STATE, action) => {\n    switch (action.type) {\n        case ADD_MESSAGE :\n            let newState = {\n                username: action.username,\n                message : action.message,\n                sentAt  : action.sentAt,\n            };\n\n            return [...state, newState];\n\n        case LOAD_MESSAGE_ERROR :\n            return state;\n\n        case LOAD_MESSAGE_PENDING :\n            console.log(state);\n            return state;\n\n        case LOAD_MESSAGE_SUCCESS :\n            return state;\n\n\n        default :\n            return state;\n    }\n};"]},"metadata":{},"sourceType":"module"}